<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Update User</title>
    <link href="css/bootstrap/bootstrap-4.3.1.css" rel="stylesheet" />
    <link href="alertify/css/alertify.min.css" rel="stylesheet">
</head>

<body>
    <div class="text-center" style="padding-top: 50px">
        <h2 class="text-primary">Update User Info</h2>
        <form method="POST" style="width: 300px; margin-left: auto; margin-right: auto" autocomplete="off">
            <input type="text" name="id" id="id" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="machno" id="machno" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="matetype" id="matetype" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="matecode" id="matecode" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="matename" id="matename" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="intime" id="intime" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="indat" id="indat" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="usrno" id="usrno" class="form-control text-center" style="margin: 10px" />
            <input type="text" name="state" id="state" class="form-control text-center" style="margin: 10px" />
        </form>
        <button type="submit" value="submit" class="btn btn-success" style="margin: 10px"
            onclick="Update()">Update</button>
        <a href="/home" class="btn btn-warning" style="margin: 10px">Back Home</a>
    </div>
</body>

</html>
<script src="js/jquery/jquery-3.4.1.js"></script>
<script src="js/bootstrap/bootstrap-4.3.1.js"></script>
<script src="alertify/js/alertify.min.js"></script>
<script>
    var id = localStorage["id"];
    var machno = localStorage["machno"];
    var matetype = localStorage["matetype"];
    var matecode = localStorage["matecode"];
    var matename = localStorage["matename"];
    var intime = localStorage["intime"];
    var indat = localStorage["indat"];
    var usrno = localStorage["usrno"];
    var state = localStorage["state"];
    $("#id").val(id);
    $("#machno").val(machno);
    $("#matetype").val(matetype);
    $("#matecode").val(matecode);
    $("#matename").val(matename);
    $("#intime").val(intime);
    $("#indat").val(indat);
    $("#usrno").val(usrno);
    $("#state").val(state);
    function Update() {
        var id = localStorage["id"];
        var machno = $("#machno").val();
        var matetype = $("#matetype").val();
        var matecode = $("#matecode").val();
        var matename = $("#matename").val();
        var intime = $("#intime").val();
        var indat = $("#indat").val();
        var usrno = $("#usrno").val();
        var state = $("#state").val();
        localStorage["machno"] = machno;
        localStorage["matetype"] = matetype;
        localStorage["matecode"] = matecode;
        localStorage["matename"] = matename;
        localStorage["intime"] = intime;
        localStorage["indat"] = indat;
        localStorage["usrno"] = usrno;
        localStorage["state"] = state;
        //localStorage["password"] = password;
        $.ajax({
            url: "/updateRubmats",
            type: "POST",
            data: {
                'id': id,
                'machno': machno,
                'matetype': matetype,
                'matecode': matecode,
                'matename': matename,
                'intime': intime,
                'indat': indat,
                'usrno': usrno,
                'state': state
            },
            success: function (response) {
                var notification = alertify.notify('Update successful!', 'success', 5, function () {
                    console.log('dismissed');
                });
            },
            failure: function (response) {
                //$.alert(response.d);
                var notification = alertify.notify('Update failed', 'danger', 5, function () {
                    console.log('dismissed');
                });
            }
        });
    }
</script>